<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STACK</title>
</head>


<body>
    <div class="tab-wrapper" id="tabs">
        <!-- NAVIGATION TABS -->
        <ul class="nav nav-tabs justify-content-center" id="mainTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active d-flex align-items-center gap-2" id="calendar-tab" data-bs-toggle="tab"
                    data-bs-target="#calendar" type="button" role="tab" aria-controls="calendar" aria-selected="true">
                    <img src="../styles/calendar-month.svg" alt=""> Schedule
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link d-flex align-items-center gap-2" id="home-tab" data-bs-toggle="tab"
                    data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="false">
                    <img src="../styles/note.svg" alt=""> Tasks
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link d-flex align-items-center gap-2" id="settings-tab" data-bs-toggle="tab"
                    data-bs-target="#settings" type="button" role="tab" aria-controls="settings" aria-selected="false">
                    <img src="../styles/settings.svg" alt=""> Settings
                </button>
            </li>
        </ul>

        <!-- TAB PAGES -->
        <div class="tab-content" id="mainTabsContent">
            <!-- Calendar -->
            <div class="tab-pane fade show active" id="calendar" role="tabpanel" aria-labelledby="calendar-tab">
                <div id="calendarInner">
                    <div id="calendarPage">
                        <button data-week-nav="prev" class="btn btn-outline-light btn-sm d-sm-none text-dark"
                            type="button"><span
                                style="color: black !important; font-weight: bolder !important;">⬅</span></button>
                        <div class="calendar-container">
                            <div>

                                <div class="d-flex justify-content-center gap-4 align-items-center mb-2">
                                    <img src="../styles/brand-stackoverflow.svg" class="title-logo" alt=""
                                        style="height: 40px;">
                                    <div>

                                        <h5 id="calendarWeekTitle" class="mb-0"></h5>
                                        <small class="text-muted">Block out your study time</small>


                                    </div>
                                </div>
                                <div class="text-end">
                                    <small id="calendarSync" class="text-secondary opacity-50"
                                        style="transition: opacity 0.3s;">
                                        Synced ✓
                                    </small>
                                    <div id="noBaseScheduleMsg" class="text-muted mt-2"
                                        style="display: none; font-size: 0.85rem; margin-bottom: 5px;">
                                        You haven’t created a base schedule yet! <br>
                                        Add repeating weekly study blocks with the Base Schedule button below.
                                    </div>
                                </div>
                            </div>

                            <div id="calendar">
                                <div id="calendarGrid" class="calendar-grid"></div>
                            </div>
                        </div>
                        <button data-week-nav="next" class="btn btn-outline-light btn-sm d-sm-none text-dark"
                            type="button"><span
                                style="color: black !important; font-weight: bolder !important;">➡</span></button>
                        <div class="btn-group d-none d-sm-flex">
                            <button data-week-nav="prev" class="btn btn-outline-secondary btn-sm" type="button">←
                                Prev</button>
                            <button data-week-nav="next" class="btn btn-outline-secondary btn-sm" type="button">Next
                                →</button>
                        </div>
                    </div>
                </div>
                <!-- Base Schedule -->
                <div class="d-flex justify-content-center align-items-center mb-3 px-2" style="margin-top: 10px;">
                    <button id="openBaseSchedule" class="btn btn-outline-primary btn-sm">Set your base
                        schedule</button>
                </div>
            </div>

            <!-- Home -->
            <div class="tab-pane fade" id="home" role="tabpanel" aria-labelledby="home-tab">
                <div class="home-container container py-4">
                    <section id="authPanel" class="auth-panel card shadow-sm p-4 mx-auto my-4" style="max-width:480px;">
                        <h5 class="text-center mb-3">Welcome</h5>

                        <form id="authForm" class="text-start">
                            <div class="mb-3">
                                <label for="authEmail" class="form-label">Email</label>
                                <input type="email" class="form-control" id="authEmail" placeholder="you@example.com"
                                    required>
                            </div>
                            <div class="mb-3">
                                <label for="authPassword" class="form-label">Password</label>
                                <input type="password" class="form-control" id="authPassword" placeholder="••••••••"
                                    required>
                            </div>

                            <div class="d-grid gap-2">
                                <button id="doLogin" type="button" class="btn btn-primary">Log In</button>
                                <button id="openSignup" type="button" class="btn btn-outline-secondary"
                                    data-bs-toggle="modal" data-bs-target="#signupModal">
                                    Create account
                                </button>
                            </div>

                            <div id="authError" class="text-danger text-center mt-3 small" style="min-height:1.25rem;">
                            </div>
                        </form>
                    </section>

                    <div id="homeApp" class="d-none">
                        <div class="d-flex justify-content-center align-items-center gap-2 mb-3">
                            <img src="../styles/brand-stackoverflow.svg" class="title-logo" alt=""
                                style="height: 40px;">
                            <h3 class="mb-0">My Tasks</h3>
                        </div>
                        <div>
                            <div class="btn-group"
                                style="display: flex; justify-content: center; margin-bottom: 10px; ">
                                <button id="sortDueDate" type="button" class="btn btn-outline-primary">
                                    Due date
                                </button>
                                <button id="sortTimeRequired" type="button" class="btn btn-outline-primary">
                                    Time required
                                </button>
                            </div>
                        </div>
                        <div id="taskList" class="row gy-3"></div>
                        <div id="noTasksMsg" class="text-center text-muted mt-3">No tasks yet — add one below!</div>
                        <div id="noStudyMsg" class="text-center text-muted mt-1" style="display: none;">
                            Tip: You can block out study time in the Calendar tab to improve task scheduling.
                        </div>
                        <div class="floating-ui">
                            <button id="toggleTaskForm" class="btn btn-primary add-btn" type="button"
                                data-bs-toggle="collapse" data-bs-target="#taskFormCollapse" aria-expanded="false"
                                aria-controls="taskFormCollapse">
                                + Add Task
                            </button>

                            <!-- Collapsed form panel -->
                            <div class="collapse form-popup" id="taskFormCollapse">
                                <div class="card shadow-sm">
                                    <div class="card-body">
                                        <form id="taskForm" class="text-start">
                                            <div class="mb-2">
                                                <label for="taskName" class="form-label">Task / Assignment</label>
                                                <input id="taskName" class="form-control"
                                                    placeholder="e.g., COMP 1510 Lab 5" required>
                                            </div>

                                            <div class="mb-2">
                                                <label for="dueDate" class="form-label">Due date</label>
                                                <input type="date" id="dueDate" class="form-control" required>
                                            </div>

                                            <div class="row g-2">
                                                <div class="col-6">
                                                    <label for="timeNeeded" class="form-label">Time needed
                                                        (hrs)</label>
                                                    <input type="number" id="timeNeeded" class="form-control" step="0.5"
                                                        min="0.5" placeholder="..." required>
                                                </div>
                                                <div class="col-6">
                                                    <label for="importance" class="form-label">Importance</label>
                                                    <select id="importance" class="form-select">
                                                        <option value="5">5 – Critical</option>
                                                        <option value="4">4 – High</option>
                                                        <option value="3" selected>3 – Medium</option>
                                                        <option value="2">2 – Low</option>
                                                        <option value="1">1 – Nice to have</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="d-flex justify-content-end mt-3 gap-2">
                                                <button type="button" class="btn btn-outline-secondary"
                                                    data-bs-toggle="collapse"
                                                    data-bs-target="#taskFormCollapse">Cancel</button>
                                                <button type="submit" class="btn btn-primary">Save Task</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- SETTINGS TAB -->
            <div class="tab-pane fade" id="settings" role="tabpanel" aria-labelledby="settings-tab">
                <div class="container py-4">
                    <div class="d-flex justify-content-center align-items-center gap-2 mb-3">
                        <img src="../styles/brand-stackoverflow.svg" class="title-logo" alt="" style="height: 40px;">
                        <h3 class="mb-0">Settings</h3>
                    </div>

                    <div class="settings-card mx-auto shadow-sm p-4 rounded-4" style="max-width: 480px;">

                        <!-- Account -->
                        <div class="text-center d-flex flex-column gap-2">
                            <h6 class=" fw-semibold mb-2">Account</h6>
                            <button id=" logoutBtn" class="btn btn-outline-danger btn-sm px-4">Sign Out</button>
                            <button id="delaccBtn" class="btn btn-outline-danger btn-sm px-4">Delete
                                Account</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Base Schedule Modal -->
        <div class="modal fade" id="baseScheduleModal" tabindex="-1" aria-labelledby="baseScheduleLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header border-0">
                        <h5 class="modal-title" id="baseScheduleLabel">Base Study Schedule</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <div class="modal-body">
                        <p class="text-muted mb-2">Click hours to toggle study time. This pattern will apply to
                            every
                            week.</p>

                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <div>
                                <h6 id="baseScheduleTitle" class="mb-0"></h6>
                                <small class="text-muted">Your recurring (Mon–Sun) study template</small>
                            </div>
                            <div class="btn-group">
                                <button type="button" class="btn btn-sm btn-outline-secondary" id="baseClearAll">Clear
                                    all</button>
                            </div>
                        </div>

                        <div id="baseScheduleGrid" class="calendar-grid"></div>
                    </div>

                    <div class="modal-footer border-0">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-primary" id="baseSave">Save Pattern</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sign Up Modal -->
        <div class="modal fade" id="signupModal" tabindex="-1" aria-labelledby="signupModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header border-0">
                        <h5 class="modal-title" id="signupModalLabel">Create your account</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <form id="signupForm">
                        <div class="modal-body">
                            <div class="mb-3">
                                <label for="suEmail" class="form-label">Email</label>
                                <input type="email" class="form-control" id="suEmail" placeholder="you@example.com"
                                    required>
                            </div>
                            <div class="mb-3">
                                <label for="suPassword" class="form-label">Password</label>
                                <input type="password" class="form-control" id="suPassword"
                                    placeholder="Minimum 6 characters" required>
                            </div>
                            <div class="mb-2">
                                <label for="suPassword2" class="form-label">Confirm Password</label>
                                <input type="password" class="form-control" id="suPassword2" required>
                            </div>
                            <div id="signupError" class="text-danger small" style="min-height:1.25rem;">
                            </div>
                        </div>

                        <div class="modal-footer border-0">
                            <button type="button" class="btn btn-link" data-bs-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-success">Create Account</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Delete Account Modal -->
        <div class="modal fade" id="confirmDelete" tabindex="-1" aria-labelledby="confirmDeleteLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header border-0">
                        <h5 class="modal-title" id="confirmDeleteLabel">Delete account info</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        This will permanently remove your tasks, events, and calendar availability. Your
                        sign-in
                        stays
                        intact.
                        Proceed?
                    </div>
                    <div class="modal-footer border-0">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button id="confirmDeleteBtn" type="button" class="btn btn-danger">Yes,
                            delete</button>
                    </div>
                </div>
            </div>
        </div>

        <script type="module" src="/src/main.js"></script>

</body>

</html>